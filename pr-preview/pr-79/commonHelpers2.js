import{s as a,f as h,a as p,b as d,o as T}from"./assets/scroll-top-cf514540.js";import"./assets/vendor-ad859c2f.js";const m=document.querySelector(".js-gallery"),G=document.querySelector("#exercise-group"),N=document.querySelector("#exercise"),A="linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),";function $(e){m.innerHTML="";const t=document.createDocumentFragment();e.forEach(({name:i,filter:l,imgURL:o})=>{const n=G.children[0].cloneNode(!0);n.style.backgroundImage=`${A} url(${o})`,n.setAttribute("data-name",i);const u=n.querySelector(".card-text-title");u.textContent=i;const g=n.querySelector(".card-text-subtitle");g.textContent=l,t.appendChild(n)}),m.appendChild(t)}function D(e,t){m.innerHTML="";const i=document.createDocumentFragment();for(let l=0;l<e.length;l++){const{name:o,_id:n,rating:u,burnedCalories:g,target:v}=e[l],c=N.children[0].cloneNode(!0);c.dataset.id=n;const k=c.querySelector(".js-title");k.textContent=o;const j=c.querySelector(".js-rating");j.textContent=Number.isInteger(u)?`${u}.0`:u.toFixed(1);const M=c.querySelector(".js-burned-calories");M.textContent=g;const B=c.querySelector(".js-target");B.textContent=v;const w=c.querySelector(".js-filter");w.textContent=`${t.filter}:`;const I=c.querySelector(".js-filter-value");I.textContent=t.excerciseFilter,i.appendChild(c)}m.appendChild(i)}const H=document.querySelector(".js-filter-block"),C=document.querySelectorAll(".js-filter"),P=C[0].textContent.trim(),z=window.innerWidth<768?9:12,E={page:1,limit:z,filter:P};f(E);async function f(e){try{a(!0);const t=await h.getExercisesFilter(e),{totalPages:i,results:l}=t;$(l),p(i,f,e)}catch(t){d(t.message)}finally{a(!1)}}H.addEventListener("click",R);function R(e){var t;if(e.target!==e.currentTarget&&((t=[...C].find(i=>i.classList.contains("active")))==null||t.classList.remove("active"),e.target.classList.contains("js-filter"))){const i=e.target.dataset.filter;e.target.classList.add("active"),f({...E,filter:i})}}const V=document.getElementById("subscribe-form");V.addEventListener("submit",async e=>{e.preventDefault();const t=e.target.elements.email.value;try{a(!0),await h.addSubscription({email:t}),d("Congrats! You've been subscribed!")}catch{d("Subscription already exists","#FF876C")}finally{e.target.reset(),a(!1)}});const r={elGallery:document.querySelector(".js-gallery"),elMainBreadCrumbsState:document.querySelector(".js-bradcrumbs"),elInnerBreadCrumbsState:document.querySelector(".js-bradcrumbs-inner"),elFilterBreadcrumb:document.querySelector(".js-bradcrumbs-filter"),elFilters:document.querySelector(".js-filter-block"),elInput:document.querySelector(".js-search-input"),elSearchForm:document.querySelector(".js-search-form"),template:document.querySelector("#exercise"),elTrash:document.querySelector(".ex-item-trash-icon")},s={excerciseFilter:"",filter:"Muscles",keyword:"",isFilledCroupExcercises(){return!this.excerciseFilter},isFilledExcercises(){return!!this.excerciseFilter},setFilter(e){this.filter=e,this.resetExcerciseFilter(),r.elSearchForm.removeEventListener("submit",F),r.elSearchForm.removeEventListener("reset",b)},setExcerciseFilter(e){this.excerciseFilter=e,r.elSearchForm.addEventListener("submit",F),r.elSearchForm.addEventListener("reset",b)},resetExcerciseFilter(){this.excerciseFilter="",this.keyword=""}},L={page:1,limit:10};function U(e){return e.charAt(0).toUpperCase()+e.slice(1)}const S=()=>{r.elGallery.innerHTML="",s.resetExcerciseFilter(),s.filter="Muscles",f({...L,limit:12,filter:"Muscles"}),y(),r.elFilters.querySelectorAll(".js-filter").forEach(t=>{t.classList.remove("active"),t.dataset.filter==="Muscles"&&t.classList.add("active")})};function y(){r.elFilterBreadcrumb.textContent=s.excerciseFilter?U(s.excerciseFilter):"",s.isFilledExcercises()?(r.elSearchForm.hidden=!1,r.elInnerBreadCrumbsState.hidden=!1,r.elMainBreadCrumbsState.classList.contains("bradcrumbs-active")||(r.elMainBreadCrumbsState.classList.add("bradcrumbs-active"),r.elMainBreadCrumbsState.addEventListener("click",S))):(r.elSearchForm.hidden=!0,r.elInnerBreadCrumbsState.hidden=!0,r.elMainBreadCrumbsState.classList.remove("bradcrumbs-active"),r.elMainBreadCrumbsState.removeEventListener("click",S))}function W(e){if(e.target===e.currentTarget)return;const t=e.target;if(s.isFilledCroupExcercises()){const i=t.closest(".card-item");if(!i)return;s.setExcerciseFilter(i.dataset.name),x()}else if(s.isFilledExcercises()&&t.closest(".ex-item-start")){const o=t.closest(".ex-item").dataset.id;T(o)}y()}function Y(e){e.target!==e.currentTarget&&e.target.classList.contains("js-filter")&&(s.setFilter(e.target.dataset.filter),y())}function F(e){e.preventDefault(),r.elInput.value&&(s.keyword=e.target.elements.search.value,x(),r.elInput.value="")}function b(){s.keyword="",x(),y()}r.elGallery.addEventListener("click",W);r.elFilters.addEventListener("click",Y);r.elSearchForm.addEventListener("submit",F);r.elSearchForm.addEventListener("reset",b);function x(){r.elGallery.innerHTML="";const e={...L};s.filter=="Muscles"?e.muscles=s.excerciseFilter:s.filter=="Equipment"?e.equipment=s.excerciseFilter:s.filter=="Body parts"&&(e.bodypart=s.excerciseFilter),s.keyword&&(e.keyword=s.keyword),q(e)}function q(e){a(!0),h.getExercises(e).then(t=>{const{totalPages:i,results:l}=t;D(l,s),p(i,q,e),!i&&d("No matching workouts found. Try different keywords or filters.")}).catch(t=>d(t.message)).finally(a(!1))}
//# sourceMappingURL=commonHelpers2.js.map
