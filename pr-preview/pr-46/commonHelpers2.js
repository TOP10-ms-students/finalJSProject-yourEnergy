import{f as E,o as O}from"./assets/exercise-popup-43e75e5c.js";import{i as m}from"./assets/vendor-ad859c2f.js";m.settings({timeout:3e3,resetOnHover:!0,icon:"material-icons",transitionIn:"flipInX",transitionOut:"flipOutX",position:"topRight"});const j=(e,t,r)=>{m.show({message:e,drag:!0,close:!1,timeout:r??5e3,position:"topRight",messageColor:"#2a2a2a",closeOnClick:!0,animateInside:!0,backgroundColor:t??"#fa903e"})},q=document.querySelector(".js-gallery");document.querySelector("#exercise-group");const $=document.querySelector("#exercise");function z(e){const t=document.querySelector(".js-gallery"),r=document.querySelector("#exercise-group"),c=document.createDocumentFragment();e.forEach(({name:i="",filter:o="",imgURL:d=""})=>{const u=d?`linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${d})`:'linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url("./img/no-img.jpg")',a=r.content.cloneNode(!0),l=a.querySelector(".card-item");l.setAttribute("data-name",i),l.style.backgroundImage=u;const p=a.querySelector(".card-text-title");p.textContent=i;const b=a.querySelector(".card-text-subtitle");b.textContent=o,d||l.classList.add("noImg"),c.appendChild(a)}),t.appendChild(c)}function P(e,t){q.innerHTML="";const r=document.createDocumentFragment();for(let c=0;c<e.length;c++){const{name:i,_id:o,rating:d,burnedCalories:u,target:a}=e[c],l=$.content.cloneNode(!0),p=l.querySelector(".ex-item");p.dataset.id=o;const b=l.querySelector(".js-title");b.textContent=i;const A=l.querySelector(".js-rating");A.textContent=d;const G=l.querySelector(".js-burned-calories");G.textContent=u;const D=l.querySelector(".js-target");D.textContent=a;const H=l.querySelector(".js-filter");H.textContent=`${t.filter}:`;const N=l.querySelector(".js-filter-value");N.textContent=t.excerciseFilter,r.appendChild(l)}q.appendChild(r)}const v=function(e){const t=document.querySelector(".js-spinner");e?t.classList.remove("hidden"):setTimeout(()=>t.classList.add("hidden"),300)};function w(e,t,r){if(r.page>=e)return;const c=document.querySelector(".js-pagination");c.innerHTML="";for(let i=1;i<=e;i++){const o=document.createElement("button");o.textContent=i,o.setAttribute("data-btn",i),Number(o.dataset.btn)===r.page&&o.classList.add("active"),o.addEventListener("click",d=>{c.querySelectorAll("button").forEach(a=>{a.classList.remove("active")}),d.currentTarget.classList.add("active"),t({...r,page:i})}),c.appendChild(o)}}const R=document.querySelector(".js-gallery"),V=document.querySelector(".js-filter-block"),M=document.querySelectorAll(".js-filter"),W=M[0].textContent.trim(),L={page:1,limit:window.innerWidth<768?9:12,filter:W};f(L);function f(e){v(!0),E.getExercisesFilter(e).then(t=>{const{totalPages:r,results:c}=t,i=_(c);X(i),w(r,f,e)}).catch(t=>j(t.message)).finally(v(!1))}function X(e){R.innerHTML="",z(e)}V.addEventListener("click",Y);function Y(e){if(e.target!==e.currentTarget&&(M.forEach(t=>{t.classList.remove("active")}),e.target.classList.contains("js-filter"))){const t=e.target.dataset.filter;e.target.classList.add("active"),f({...L,filter:t})}}function _(e){if(window.innerWidth>767){const t=L.limit-e.length;for(let r=0;r<t;r++)e.push({})}return e}const B=document.querySelector(".js-menu-backdrop"),J=document.querySelector(".js-menu-container"),h=document.querySelector(".js-open-menu"),K=document.querySelector(".js-close-menu"),Q=document.querySelectorAll(".js-menu-link");function g(){const e=h.getAttribute("aria-expanded")==="true"||!1;h.setAttribute("aria-expanded",!e),J.classList.toggle("is-open"),B.classList.toggle("is-hidden")}h.addEventListener("click",g);K.addEventListener("click",g);Q.forEach(e=>{e.addEventListener("click",g)});B.addEventListener("click",({target:e,currentTarget:t})=>{t===e&&g()});const Z=document.getElementById("subscribe-form");Z.addEventListener("submit",async e=>{e.preventDefault();const t=e.target.elements.email.value;try{await E.addSubscription({email:t}),m.success({title:"Congrats! You've been subscribed!"})}catch{m.info({title:"Subscription already exists"})}finally{e.target.reset()}});const s={elGallery:document.querySelector(".js-gallery"),elMainBreadCrumbsState:document.querySelector(".js-bradcrumbs"),elInnerBreadCrumbsState:document.querySelector(".js-bradcrumbs-inner"),elFilterBreadcrumb:document.querySelector(".js-bradcrumbs-filter"),elFilters:document.querySelector(".js-filter-block"),elInput:document.querySelector(".js-search-input"),elSearchForm:document.querySelector(".js-search-form"),template:document.querySelector("#exercise"),elTrash:document.querySelector(".ex-item-trash-icon")},n={excerciseFilter:"",filter:"Muscles",keyword:"",isFilledCroupExcercises(){return!this.excerciseFilter},isFilledExcercises(){return!!this.excerciseFilter},setFilter(e){this.filter=e,this.resetExcerciseFilter(),s.elSearchForm.removeEventListener("submit",S),s.elSearchForm.removeEventListener("reset",x)},setExcerciseFilter(e){this.excerciseFilter=e,s.elSearchForm.addEventListener("submit",S),s.elSearchForm.addEventListener("reset",x)},resetExcerciseFilter(){this.excerciseFilter="",this.keyword=""}},I={page:1,limit:10};function U(e){return e.charAt(0).toUpperCase()+e.slice(1)}const k=()=>{n.resetExcerciseFilter(),n.filter="Muscles",f({...I,filter:"Muscles"}),y(),s.elFilters.querySelectorAll(".js-filter").forEach(t=>{t.classList.remove("active"),t.dataset.filter==="Muscles"&&t.classList.add("active")})};function y(){s.elFilterBreadcrumb.textContent=n.excerciseFilter?U(n.excerciseFilter):"",n.isFilledExcercises()?(s.elSearchForm.hidden=!1,s.elInnerBreadCrumbsState.hidden=!1,s.elMainBreadCrumbsState.classList.contains("bradcrumbs-active")||(s.elMainBreadCrumbsState.classList.add("bradcrumbs-active"),s.elMainBreadCrumbsState.addEventListener("click",k))):(s.elSearchForm.hidden=!0,s.elInnerBreadCrumbsState.hidden=!0,s.elMainBreadCrumbsState.classList.remove("bradcrumbs-active"),s.elMainBreadCrumbsState.removeEventListener("click",k))}function ee(e){if(e.target===e.currentTarget)return;const t=e.target;if(n.isFilledCroupExcercises()){const r=t.closest(".card-item");if(!r)return;n.setExcerciseFilter(r.dataset.name),C()}else if(n.isFilledExcercises()&&t.closest(".ex-item-start")){const i=t.closest(".ex-item").dataset.id;O(i)}y()}function te(e){e.target!==e.currentTarget&&e.target.classList.contains("js-filter")&&(n.setFilter(e.target.dataset.filter),y())}function S(e){e.preventDefault(),n.keyword=e.target.elements.search.value,C()}function x(){n.keyword="",C(),y()}s.elGallery.addEventListener("click",ee);s.elFilters.addEventListener("click",te);s.elSearchForm.addEventListener("submit",S);s.elSearchForm.addEventListener("reset",x);function C(){const e={...I};n.filter=="Muscles"?e.muscles=n.excerciseFilter:n.filter=="Equipment"?e.equipment=n.excerciseFilter:n.filter=="Body parts"&&(e.bodypart=n.excerciseFilter),n.keyword&&(e.keyword=n.keyword),T(e)}function T(e){E.getExercises(e).then(t=>{const{totalPages:r,results:c}=t;P(c,n),w(r,T,e)}).catch(t=>j(t.message))}const F=document.getElementById("scroll-top"),re=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},ne=()=>{window.scrollY>window.innerHeight?F.classList.add("scroll-show"):F.classList.remove("scroll-show")};window.addEventListener("scroll",ne);F.addEventListener("click",re);
//# sourceMappingURL=commonHelpers2.js.map
