import{f as p,a as L,o as A}from"./assets/mob-burger-menu-2119c3bb.js";import{i as g}from"./assets/vendor-ad859c2f.js";const q=(e,t,s)=>{g.show({message:e,drag:!0,close:!1,timeout:s??5e3,position:"topRight",messageColor:"#2a2a2a",closeOnClick:!0,animateInside:!0,backgroundColor:t??"#fa903e"})},y=document.querySelector(".js-gallery"),D=document.querySelector("#exercise-group"),N=document.querySelector("#exercise");function P(e){const t=document.createDocumentFragment();e.forEach(({name:s="",filter:l="",imgURL:c=""})=>{const u=c?`linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${c})`:'linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url("./img/no-img.jpg")',n=D.children[0].cloneNode(!0);n.setAttribute("data-name",s),n.style.backgroundImage=u;const m=n.querySelector(".card-text-title");m.textContent=s;const f=n.querySelector(".card-text-subtitle");f.textContent=l,c||n.classList.add("noImg"),t.appendChild(n)}),y.appendChild(t)}function $(e,t){y.innerHTML="";const s=document.createDocumentFragment();for(let l=0;l<e.length;l++){const{name:c,_id:u,rating:n,burnedCalories:m,target:f}=e[l],a=N.children[0].cloneNode(!0);a.dataset.id=u;const w=a.querySelector(".js-title");w.textContent=c;const B=a.querySelector(".js-rating");B.textContent=n;const I=a.querySelector(".js-burned-calories");I.textContent=m;const T=a.querySelector(".js-target");T.textContent=f;const M=a.querySelector(".js-filter");M.textContent=`${t.filter}:`;const G=a.querySelector(".js-filter-value");G.textContent=t.excerciseFilter,s.appendChild(a)}y.appendChild(s)}const E=function(e){const t=document.querySelector(".js-spinner");e?t.classList.remove("hidden"):setTimeout(()=>t.classList.add("hidden"),300)},z=document.querySelector(".js-gallery"),H=document.querySelector(".js-filter-block"),v=document.querySelectorAll(".js-filter"),R=v[0].textContent.trim(),x={page:1,limit:window.innerWidth<768?9:12,filter:R};o(x);function o(e){E(!0),p.getExercisesFilter(e).then(t=>{const{totalPages:s,results:l}=t,c=Y(l);V(c),L(s,o,e)}).catch(t=>q(t.message)).finally(E(!1))}function V(e){z.innerHTML="",P(e)}H.addEventListener("click",W);function W(e){if(e.target!==e.currentTarget&&(v.forEach(t=>{t.classList.remove("active")}),e.target.classList.contains("js-filter"))){const t=e.target.dataset.filter;e.target.classList.add("active"),o({...x,filter:t})}}function Y(e){if(window.innerWidth>767){const t=x.limit-e.length;for(let s=0;s<t;s++)e.push({})}return e}const O=document.getElementById("subscribe-form");O.addEventListener("submit",async e=>{e.preventDefault();const t=e.target.elements.email.value;try{await p.addSubscription({email:t}),g.success({title:"Congrats! You've been subscribed!"})}catch{g.info({title:"Subscription already exists"})}finally{e.target.reset()}});const i={elGallery:document.querySelector(".js-gallery"),elMainBreadCrumbsState:document.querySelector(".js-bradcrumbs"),elInnerBreadCrumbsState:document.querySelector(".js-bradcrumbs-inner"),elFilterBreadcrumb:document.querySelector(".js-bradcrumbs-filter"),elFilters:document.querySelector(".js-filter-block"),elInput:document.querySelector(".js-search-input"),elSearchForm:document.querySelector(".js-search-form"),template:document.querySelector("#exercise"),elTrash:document.querySelector(".ex-item-trash-icon")},r={excerciseFilter:"",filter:"Muscles",keyword:"",isFilledCroupExcercises(){return!this.excerciseFilter},isFilledExcercises(){return!!this.excerciseFilter},setFilter(e){this.filter=e,this.resetExcerciseFilter(),i.elSearchForm.removeEventListener("submit",h),i.elSearchForm.removeEventListener("reset",b)},setExcerciseFilter(e){this.excerciseFilter=e,i.elSearchForm.addEventListener("submit",h),i.elSearchForm.addEventListener("reset",b)},resetExcerciseFilter(){this.excerciseFilter="",this.keyword=""}},k={page:1,limit:10};function _(e){return e.charAt(0).toUpperCase()+e.slice(1)}const C=()=>{r.resetExcerciseFilter(),r.filter="Muscles",o({...k,filter:"Muscles"}),d(),i.elFilters.querySelectorAll(".js-filter").forEach(t=>{t.classList.remove("active"),t.dataset.filter==="Muscles"&&t.classList.add("active")})};function d(){i.elFilterBreadcrumb.textContent=r.excerciseFilter?_(r.excerciseFilter):"",r.isFilledExcercises()?(i.elSearchForm.hidden=!1,i.elInnerBreadCrumbsState.hidden=!1,i.elMainBreadCrumbsState.classList.contains("bradcrumbs-active")||(i.elMainBreadCrumbsState.classList.add("bradcrumbs-active"),i.elMainBreadCrumbsState.addEventListener("click",C))):(i.elSearchForm.hidden=!0,i.elInnerBreadCrumbsState.hidden=!0,i.elMainBreadCrumbsState.classList.remove("bradcrumbs-active"),i.elMainBreadCrumbsState.removeEventListener("click",C))}function J(e){if(e.target===e.currentTarget)return;const t=e.target;if(r.isFilledCroupExcercises()){const s=t.closest(".card-item");if(!s)return;r.setExcerciseFilter(s.dataset.name),F()}else if(r.isFilledExcercises()&&t.closest(".ex-item-start")){const c=t.closest(".ex-item").dataset.id;A(c)}d()}function K(e){e.target!==e.currentTarget&&e.target.classList.contains("js-filter")&&(r.setFilter(e.target.dataset.filter),d())}function h(e){e.preventDefault(),r.keyword=e.target.elements.search.value,F()}function b(){r.keyword="",F(),d()}i.elGallery.addEventListener("click",J);i.elFilters.addEventListener("click",K);i.elSearchForm.addEventListener("submit",h);i.elSearchForm.addEventListener("reset",b);function F(){const e={...k};r.filter=="Muscles"?e.muscles=r.excerciseFilter:r.filter=="Equipment"?e.equipment=r.excerciseFilter:r.filter=="Body parts"&&(e.bodypart=r.excerciseFilter),r.keyword&&(e.keyword=r.keyword),j(e)}function j(e){p.getExercises(e).then(t=>{const{totalPages:s,results:l}=t;$(l,r),L(s,j,e)}).catch(t=>q(t.message))}const S=document.getElementById("scroll-top"),Q=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},X=()=>{window.scrollY>window.innerHeight?S.classList.add("scroll-show"):S.classList.remove("scroll-show")};window.addEventListener("scroll",X);S.addEventListener("click",Q);
//# sourceMappingURL=commonHelpers2.js.map
