{"version":3,"file":"commonHelpers2.js","sources":["../src/js/helper.js","../src/js/services/iziToast.js","../src/js/services/gallery-service.js","../src/js/services/paginator-service.js","../src/js/gallery.js","../src/js/services/subscribe-action.js","../src/js/gallery-events.js","../src/js/scroll-top.js","../src/js/index.js"],"sourcesContent":["import iziToast from 'izitoast';\n\n// iziToast settings\niziToast.settings({\n  timeout: 3000,\n  resetOnHover: true,\n  icon: 'material-icons',\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n  position: 'topRight',\n});\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const showIziToast = (message, color, time) => {\n  iziToast.show({\n    message,\n    drag: true,\n    close: false,\n    timeout: time ?? 5000,\n    position: 'topRight',\n    messageColor: '#2a2a2a',\n    closeOnClick: true,\n    animateInside: true,\n    backgroundColor: color ?? '#fa903e',\n  });\n};\n","export function galleryTemplate(data) {\n  const gallery = document.querySelector('.js-gallery');\n  const template = document.querySelector('#exercise-group');\n  const fragment = document.createDocumentFragment();\n\n  data.forEach(({ name, filter, imgURL }) => {\n    const bgImg = imgURL\n      ? `linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${imgURL})`\n      : `linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url(\"./img/no-img.jpg\")`;\n    const clone = template.content.cloneNode(true);\n    const cardItem = clone.querySelector('.card-item');\n    cardItem.setAttribute('data-name', name);\n    cardItem.style.backgroundImage = bgImg;\n    const title = clone.querySelector('.card-text-title');\n    title.textContent = name;\n    const subtitle = clone.querySelector('.card-text-subtitle');\n    subtitle.textContent = filter;\n    if (!imgURL) cardItem.classList.add('noImg');\n    fragment.appendChild(clone);\n  });\n\n  gallery.appendChild(fragment);\n}\n","export function renderPagination(totalPages, fetchGallery, params) {\n  if (params.page >= totalPages) return;\n  const paginationContainer = document.querySelector('.js-pagination');\n  paginationContainer.innerHTML = '';\n\n  for (let i = 1; i <= totalPages; i++) {\n    const pageButton = document.createElement('button');\n    pageButton.textContent = i;\n    pageButton.setAttribute('data-btn', i);\n    if (Number(pageButton.dataset.btn) === params.page)\n      pageButton.classList.add('active');\n\n    pageButton.addEventListener('click', evt => {\n      paginationContainer.querySelectorAll('button').forEach(button => {\n        button.classList.remove('active');\n      });\n      const btn = evt.currentTarget;\n      btn.classList.add('active');\n      fetchGallery({ ...params, page: i });\n    });\n    paginationContainer.appendChild(pageButton);\n  }\n}\n","import { fetchApi } from './services/api-service';\nimport { showIziToast } from './services/iziToast';\nimport { galleryTemplate } from './services/gallery-service';\nimport { renderPagination } from './services/paginator-service';\n\nconst gallery = document.querySelector('.js-gallery');\nconst galleryFilterBlock = document.querySelector('.js-filter-block');\nconst galleryFilter = document.querySelectorAll('.js-filter');\n\nconst filter = galleryFilter[0].textContent.trim();\nconst params = {\n  page: 1,\n  limit: window.innerWidth < 768 ? 9 : 12,\n  filter,\n};\ngetExercisesGallery(params);\n\nfunction getExercisesGallery(params) {\n  fetchApi\n    .getExercisesFilter(params)\n    .then(resp => {\n      const { totalPages, results } = resp;\n      const emptyItemsToAdd = params.limit - results.length;\n      for (let i = 0; i < emptyItemsToAdd; i++) {\n        results.push({});\n      }\n      renderGalleryMarkup(results);\n      renderPagination(totalPages, getExercisesGallery, params);\n    })\n    .catch(err => showIziToast(err.message));\n}\n\nfunction renderGalleryMarkup(data) {\n  gallery.innerHTML = '';\n  galleryTemplate(data);\n}\n\ngalleryFilterBlock.addEventListener('click', handlerClick);\n\nfunction handlerClick(evt) {\n  if (evt.target === evt.currentTarget) return;\n  galleryFilter.forEach(button => {\n    button.classList.remove('active');\n  });\n  if (evt.target.classList.contains('js-filter')) {\n    const filterValue = evt.target.dataset.filter;\n    evt.target.classList.add('active');\n    getExercisesGallery({ ...params, filter: filterValue });\n  }\n}\n","import iziToast from 'izitoast';\n\nimport { fetchApi } from './api-service';\n\n\nconst form = document.getElementById('subscribe-form');\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  const email = e.target.elements.email.value;\n\n  try {\n    await fetchApi.addSubscription({ email });\n    iziToast.success({\n      title: \"Congrats! You've been subscribed!\",\n    });\n  } catch (err) {\n    iziToast.info({\n      title: 'Subscription already exists',\n    });\n  } finally {\n    e.target.reset();\n  }\n});\n","import { fetchApi } from './services/api-service';\nimport { showIziToast } from './services/iziToast';\n\n\n// Constants\n\nexport const galaryState = {\n    page: '',\n    excerciseFilter: '',\n    filter: 'muscles',\n    keyword: '',\n}\n\nexport const pageExcercises = 'Excercises';\nexport const pageFavorites = 'Favorites';\n\nconst elems = {\n    elGallery: document.querySelector('.js-gallery'),\n    elMainBreadCrumbsState: document.querySelector('.js-bradcrumbs'),\n    elFilterBreadcrumb: document.querySelector('.js-bradcrumbs-filter'),\n    elFilters: document.querySelector('.js-filter-block'),\n    elInput: document.querySelector('.js-search-input'),\n    elSearchForm: document.querySelector('.js-search-form'),\n    template: document.querySelector('#exercise')\n}\n\nconst defaultParams = {\n  page: 1,\n  limit: 10\n};\n\n\n// Functions\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction renderNavigation() {\n    elems.elMainBreadCrumbsState.textContent = `${galaryState.page} ${galaryState.excerciseFilter ? ' /' : ''}`;\n    elems.elFilterBreadcrumb.textContent = galaryState.excerciseFilter ? capitalizeFirstLetter(galaryState.excerciseFilter) : '';\n    if (galaryState.page === pageExcercises) {\n        if (galaryState.excerciseFilter) {\n            elems.elSearchForm.hidden = false;\n        }\n        else {\n            elems.elSearchForm.hidden = true;\n        }\n    } else if (galaryState.page === pageFavorites) {\n        elems.elSearchForm.hidden = true;\n        elems.elFilters.hidden = true;\n    }\n}\n\n// Events\n\nfunction handlerGallaryClick(evt) {\n    if (evt.target === evt.currentTarget) return;\n    \n    const galleryItem = evt.target.closest('.card-item');\n    if (!galleryItem) return;\n    const excerciseFilter = galleryItem.dataset.name;\n    galaryState.excerciseFilter = excerciseFilter;\n    renderNavigation();\n\n    if (galaryState.page === pageExcercises) {\n        getExercisesGallery()\n    }\n}\n\nfunction handlerFilterClick(evt) {\n    if (evt.target === evt.currentTarget) return;\n    if (evt.target.classList.contains('js-filter')) {\n        galaryState.filter = evt.target.dataset.filter;\n        galaryState.excerciseFilter = '';\n        renderNavigation();\n    }\n}\n\n// Listeners\n\nelems.elGallery.addEventListener('click', handlerGallaryClick);\nelems.elFilters.addEventListener('click', handlerFilterClick);\n\n// Render Excercises Gallery\nfunction getExercisesGallery() {\n\n    const params = { ...defaultParams };\n    if (galaryState.page === pageExcercises) {\n        if (galaryState.excerciseFilter) {\n            if (galaryState.filter == 'Muscles') {\n                params.muscles = galaryState.excerciseFilter;\n            } else if (galaryState.filter == 'Equipment') {\n                params.equipment = galaryState.excerciseFilter;\n            } else if (galaryState.filter == 'Body parts') {\n                params.bodypart = galaryState.excerciseFilter;\n            }\n\n            if (galaryState.keyword) {\n                params.keyword = galaryState.keyword;\n            }\n            fetchApi\n            .getExercises(params)\n            .then(resp => renderExcercises(resp.results))\n            .catch(err => showIziToast(err.message));\n        }\n        else {\n            // function for modal window open\n        }\n    }\n}\n\nfunction renderExcercises(data) {\n    // TODO: \n    // dirty rander. develop next time TODO\n    elems.elGallery.innerHTML = '';\n    for (let i = 0; i < data.length; i++) {\n        const {name, _id, rating} = data[i];\n        const clone = elems.template.content.cloneNode(true);\n        \n        const elName = clone.querySelector('.ex-item-title-ex');\n        elName.textContent = name;\n\n        const elRating = clone.querySelector('.ex-item-rating-text');\n        elRating.textContent = rating;\n\n        elems.elGallery.appendChild(clone);\n    }\n    \n}\n","const scrollBtn = document.getElementById('scroll-top');\n\nconst topFunction = () => {\n  document.body.scrollTop = 0;\n  document.documentElement.scrollTop = 0;\n};\n\nconst scrollBtnDisplay = () => {\n  window.scrollY > window.innerHeight\n    ? scrollBtn.classList.add('scroll-show')\n    : scrollBtn.classList.remove('scroll-show');\n};\n\nwindow.addEventListener('scroll', scrollBtnDisplay);\nscrollBtn.addEventListener('click', topFunction);\n","import './helper';\nimport './quote-of-the-day';\nimport './gallery';\nimport './services/subscribe-action';\nimport './gallery-events';\nimport './scroll-top';\nimport { galaryState, pageExcercises } from './gallery-events';\n\ngalaryState.page = pageExcercises;\n"],"names":["iziToast","showIziToast","message","color","time","galleryTemplate","data","gallery","template","fragment","name","filter","imgURL","bgImg","clone","cardItem","title","subtitle","renderPagination","totalPages","fetchGallery","params","paginationContainer","i","pageButton","evt","button","galleryFilterBlock","galleryFilter","getExercisesGallery","fetchApi","resp","results","emptyItemsToAdd","renderGalleryMarkup","err","handlerClick","filterValue","form","email","galaryState","pageExcercises","pageFavorites","elems","defaultParams","capitalizeFirstLetter","string","renderNavigation","handlerGallaryClick","galleryItem","excerciseFilter","handlerFilterClick","renderExcercises","_id","rating","elName","elRating","scrollBtn","topFunction","scrollBtnDisplay"],"mappings":"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"}