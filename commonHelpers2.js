import{s as o,f as F,a as x,b as d,o as M}from"./assets/scroll-top-198fe05d.js";import"./assets/vendor-ad859c2f.js";const p=document.querySelector(".js-gallery"),A=document.querySelector("#exercise-group"),N=document.querySelector("#exercise"),P="linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),";function $(e){const t=document.createDocumentFragment();e.forEach(({name:i,filter:c,imgURL:u})=>{const a=A.children[0].cloneNode(!0);a.style.backgroundImage=`${P} url(${u})`,a.setAttribute("data-name",i),a.querySelector(".card-text-title").textContent=i,a.querySelector(".card-text-subtitle").textContent=c,t.appendChild(a)}),p.replaceChildren(t)}function D(e,t){const i=document.createDocumentFragment();for(let c=0;c<e.length;c++){const{name:u,_id:a,rating:y,burnedCalories:L,target:k}=e[c],l=N.children[0].cloneNode(!0);l.dataset.id=a;const j=l.querySelector(".js-title");j.textContent=u;const I=l.querySelector(".js-rating");I.textContent=Number.isInteger(y)?`${y}.0`:y.toFixed(1);const w=l.querySelector(".js-burned-calories");w.textContent=L;const B=l.querySelector(".js-target");B.textContent=k;const T=l.querySelector(".js-filter");T.textContent=`${t.filter}:`;const G=l.querySelector(".js-filter-value");G.textContent=t.excerciseFilter,i.appendChild(l)}p.replaceChildren(i)}const R=window.innerWidth<768?9:12,z=document.querySelector(".js-filter-block"),C=document.querySelectorAll(".js-filter"),V=C[0].textContent.trim(),E={page:1,limit:R,filter:V};m(E);async function m(e){try{o(!0);const t=await F.getExercisesFilter(e),{totalPages:i,results:c}=t;$(c),x(i,m,e)}catch(t){d(t.message)}finally{o(!1)}}z.addEventListener("click",Y);function Y(e){var t;if(e.target!==e.currentTarget&&((t=[...C].find(i=>i.classList.contains("active")))==null||t.classList.remove("active"),e.target.classList.contains("js-filter"))){const i=e.target.dataset.filter;e.target.classList.add("active"),m({...E,filter:i})}}const _=document.getElementById("subscribe-form");_.addEventListener("submit",U);async function U(e){e.preventDefault();const t=e.target.elements.email.value;try{o(!0),await F.addSubscription({email:t}),d("Congrats! You've been subscribed!","#53e276")}catch{d("Subscription already exists","#FF876C")}finally{e.target.reset(),o(!1)}}const r={elGallery:document.querySelector(".js-gallery"),elMainBreadCrumbsState:document.querySelector(".js-bradcrumbs"),elInnerBreadCrumbsState:document.querySelector(".js-bradcrumbs-inner"),elFilterBreadcrumb:document.querySelector(".js-bradcrumbs-filter"),elFilters:document.querySelector(".js-filter-block"),elInput:document.querySelector(".js-search-input"),elSearchForm:document.querySelector(".js-search-form"),template:document.querySelector("#exercise"),elTrash:document.querySelector(".ex-item-trash-icon")},n={muscles:"Muscles",equipment:"Equipment",bodyParts:"Body parts"},s={excerciseFilter:"",filter:n.muscles,keyword:"",isFilledCroupExcercises(){return!this.excerciseFilter},isFilledExcercises(){return!!this.excerciseFilter},setFilter(e){this.filter=e,this.resetExcerciseFilter(),r.elSearchForm.removeEventListener("submit",g),r.elSearchForm.removeEventListener("reset",b)},setExcerciseFilter(e){this.excerciseFilter=e,r.elSearchForm.addEventListener("submit",g),r.elSearchForm.addEventListener("reset",b)},resetExcerciseFilter(){this.excerciseFilter="",this.keyword=""}},q={page:1,limit:10};function W(e){return e.charAt(0).toUpperCase()+e.slice(1)}const h=()=>{s.resetExcerciseFilter(),s.filter=n.muscles,m({...q,limit:12,filter:n.muscles}),f(),r.elFilters.querySelectorAll(".js-filter").forEach(t=>{t.classList.remove("active"),t.dataset.filter===n.muscles&&t.classList.add("active")})};function f(){r.elFilterBreadcrumb.textContent=s.excerciseFilter?W(s.excerciseFilter):"",s.isFilledExcercises()?(r.elSearchForm.hidden=!1,r.elInnerBreadCrumbsState.hidden=!1,r.elMainBreadCrumbsState.classList.contains("bradcrumbs-active")||(r.elMainBreadCrumbsState.classList.add("bradcrumbs-active"),r.elMainBreadCrumbsState.addEventListener("click",h))):(r.elSearchForm.hidden=!0,r.elInnerBreadCrumbsState.hidden=!0,r.elMainBreadCrumbsState.classList.remove("bradcrumbs-active"),r.elMainBreadCrumbsState.removeEventListener("click",h))}function H(e){if(e.target===e.currentTarget)return;const t=e.target;if(s.isFilledCroupExcercises()){const i=t.closest(".card-item");if(!i)return;s.setExcerciseFilter(i.dataset.name),S()}else if(s.isFilledExcercises()&&t.closest(".ex-item-start")){const u=t.closest(".ex-item").dataset.id;M(u)}f()}function J(e){e.target!==e.currentTarget&&e.target.classList.contains("js-filter")&&(s.setFilter(e.target.dataset.filter),f())}function g(e){e.preventDefault(),r.elInput.value&&(s.keyword=e.target.elements.search.value,S(),r.elInput.value="")}function b(){s.keyword="",S(),f()}r.elGallery.addEventListener("click",H);r.elFilters.addEventListener("click",J);r.elSearchForm.addEventListener("submit",g);r.elSearchForm.addEventListener("reset",b);function S(){const e={...q};s.filter==n.muscles?e.muscles=s.excerciseFilter:s.filter==n.equipment?e.equipment=s.excerciseFilter:s.filter==n.bodyParts&&(e.bodypart=s.excerciseFilter),s.keyword&&(e.keyword=s.keyword),v(e)}async function v(e){o(!0);try{const t=await F.getExercises(e),{totalPages:i,results:c}=t;D(c,s),x(i,v,e),!i&&d("No matching workouts found. Try different keywords or filters.")}catch(t){d(t.message)}finally{o(!1)}}
//# sourceMappingURL=commonHelpers2.js.map
